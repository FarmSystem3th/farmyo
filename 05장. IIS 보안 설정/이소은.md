# 5장 - IIS 보안 설정

## IIS
- IIS: IIS는 마이크로소프트의 인터넷 정보 서비스(Internet Information Service)이다. IIS는 ASP가 실행되는 웹 서버일 뿐만 아니라, 인터넷 표준 프로토콜인 FTP, SNMP, NNTP 등의 서비스도 지원한다. 
- IIS의 WWW 서비스: World Wide Web 서비스는 인터넷 상에 많은 그래픽을 포함하고, 복잡하게 링크되어있는 콘텐츠를 웹 브라우저에 효과적으로 출판할 수 있게 해주는 서비스이다. 즉, 홈페이지를 클라이언트에게 보여주기 위해 필요한 서비스이다. 

## 1) 디렉터리 인덱싱 차단 설정
- 디렉터리 인덱싱이 될 경우 디렉터리 내의 파일이 노출된다. 

## 2) 웹 서버 정보 누출 차단 설정
- 웹 서버 정보가 노출될 경우 공격자는 해당 서버의 공개된 취약점을 이용해 공격할 수 있기 때문에 공격 시간을 단축할 수 있게 된다. 

## 3) 홈 디렉터리 쓰기 권한 차단 설정
- 홈 디렉터리는 쓰기 권한이 필요하지 않기 때문에 차단하는 것이 좋다.
- 홈 디렉터리에 만약 쓰기 권한이 설정되어있는 경우 PUT 메소드 등을 이용해 index.html 파일을 업로드할 수 있으며, 업로드가 성공하면 홈페이지의 메인 페이지가 업로드된 파일로 변경돼 변조된 페이지가 출력된다. 

## 4) 파일 업로드 디렉터리 실행 권한 차단 설정
- 파일 업로드 디렉터리는 웹 셸 업로드 시 실행 권한이 있으면 큰 피해를 입을 수 있기 때문에 실행 권한을 반드시 제거해야 한다.
- 근본적으로 업로드 디렉터리는 홈페이지의 디렉터리 하위에 위차하게 하지 않으며, 별도의 공간에 저장하게 하는 편이 안전하다.
- 정상적인 웹 서비스를 위해 홈 디렉터리와 달리 업로드 디렉터리는 쓰기 권한이 설정되어 있어야 한다.
- 첨부 파일이 저장되는 업로드 디렉터리는 반드시 실행 권한을 제거해 운영해야만 파일 업로드를 통한 웹 셸 공격에 대응할 수 있다. 

## 5) 사용자 오류 페이지 설정
- 기본적으로 제공하는 오류 페이지의 경우 오류 코드 등이 포함돼있기 때문에 사용자가 별도로 생성한 오류 페이지를 지정하는 것이 바람직하다. 

## 6) 메소드 제한 설정
- PUT, DELETE와 같이 위험한 메소드뿐만 아니라 웹 서비스에 꼭 필요하지 않은 메소드는 모두 비활성화하는 편이 바람직하다. 

## 7) 웹 관리자 페이지 접근 IP 설정
- 관리자 페이지는 일반 사용자의 접근이 필요하지 않기 때문에, 홈페이지를 관리하는 관리자 컴퓨터를 제외한 일반 사용자 컴퓨터에서는 관리자 페이지에 접근할 수 없게 해야 한다.
- 브라우저를 통해 관리자 페이지를 호출했을 때 일반 사용자가 접근 가능하다면 관리자 페이지가 취약한 것이다.
- 따라서 관리자 페이지에서는 접근할 수 있는 권한을 가진 IP에서만 접근 가능하게 접근 권한을 설정한다. 

## 8) 디폴트 페이지 삭제
- 홈페이지 운영에 필요 없는 샘플 페이지, 매뉴얼 페이지 등이 존재할 경우에는 불필요한 정보를 노출시키게 된다. 

## 9) 상위 경로로의 이동 차단 설정
- 상위 경로로의 이동이 가능하면 시스템 파일이나 소스 파일로의 접근이 가능하게 된다.

## 10) 소스 파일이나 설정 파일의 접근 권한 설정
- 소스 파일과 설정 파일은 일반 사용자가 접근할 필요가 없는 파일들로, 권한 설정을 통해 차단해야 한다.
  
## 11) 기타 보안 설정
- 세션 타임 아웃 설정
- 디버깅 오류 메시지 차단
- 미사용 스크립트 매핑 제거
- 로그 관리


🔍 궁금한점
- 스크립트 매핑이 뭘까?: 스크립트 매핑은 IIS와 같은 웹 서버에서 특정 파일 확장자나 URL 패턴을 처리할 때 사용하는 방법이다. 스크립트 매핑을 통해 특정 확장자를 가진 파일을 처리할 수 있는 프로그램이나 핸들러를 지정할 수 있다.
